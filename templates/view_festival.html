{% extends "base.html" %}
{% block content %}

<div class="text-center view_festival">
    <!-- Hero image/festival name/tagline -->
    <section class="hub-hero-section">
        {% if session.user|lower == 'administrator' %}
        <!-- Admin only edit/delete button -->
        <section class="admin-only text-end">
            <a href="{{ url_for('edit_festival', url=festival.url) }}"><i class="far fa-edit edit"></i></a>
            <a href="{{ url_for('delete_festival', url=festival.url) }}"><i class="far fa-trash-alt delete"></i></a>
            <br>
        </section>
        {% endif %}
        <div class="hub-headings-container center-content">
            <div class="hub-headings-content">
                <h1 class="hub-h1">{{ festival.name }}</h1>
                <i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i
                    class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i
                    class="fas fa-star hub-star"></i>
                <h2 class="hub-description"><em>{{ festival.description }}</em></h2>
            </div>
        </div>
    </section>
    <!-- Festival information section -->
    <section class="hub-info-container text-start container-fluid">
        <div class="container">
            <div class="row">
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Location:</h3> 
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <p class="hub-info">{{ festival.location }}</p>
                </div>
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Dates:</h3>
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <p class="hub-info">{{ festival.start_date }} to {{ festival.end_date }}</p>
                </div>
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Website:</h3>
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <a href="{{ festival.website }}" target="_blank" class="hub-info">Official Website <i class="fas fa-external-link-alt"></i></a>
                </div>
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Genre:</h3>
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <p class="hub-info">{{ festival.genre }}</p>
                </div>
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Notable acts:</h3>
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <p class="hub-info">{{ festival.notable_act_one }}, {{ festival.notable_act_two }}, {{ festival.notable_act_three }}.</p>
                </div>
                
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Cost:</h3>
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <p class="hub-info">{{ festival.ticket_price }}</p>
                </div>
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Tickets:</h3>
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <a href="{{ festival.ticket_link }}" target="_blank" class="hub-info">Link to tickets <i class="fas fa-external-link-alt"></i></a>
                </div>
                <div class="col-4 col-md-2 col-lg-1">
                    <h3 class="hub-info-heading">Capacity:</h3>
                </div>
                <div class="col-8 col-md-4 col-lg-3">
                    <p class="hub-info"> {{ festival.capacity }}</p>
                </div>
                <div class="col-lg-4 d-none d-lg-block"></div>
            </div>
        </div> 
    </section>
    <!-- Reviews section -->
    <section class="container-fluid reviews-section">
        <div class="container">
            <div class="row reviews-heading-container">
                <div class="col-12 text-start">
                    <h2 class="reviews-heading d-inline-block">Latest reviews</h2>
                    {% if session.user %}
                        <a class="add-review-btn" href="{{ url_for('add_review', url=festival.url) }}" role="button">Add Review</a>
                    {% endif %}
                </div>
            </div>
            {% if reviews_arr %}
            {% for review in reviews_arr %}
            <div class="row review-row text-start">
                <div class="col-8">
                    <h3 class="review-author">{{ review.created_by }} - <em>{{ review.year }}</em></h3>
                </div>
                <div class="col-4 text-end">
                    <h3 class="review-rating">{{ review.rating }} stars</h3>
                </div>
                <div class="col-8 review-text">
                    <p><em>{{ review.text }}</em></p>
                </div>
                <div class="col-4 text-end">
                    <button>Read Less</button>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Location: {{ review.location }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Nightlife: {{ review.nightlife }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Lineup: {{ review.lineup }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Campsites: {{ review.campsites }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Value for Money: {{ review.value }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Food: {{ review.food }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Toilets: '{{ review.toilets }}'</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category">Kid friendly? '{{ review.kid_friendly }}</h4>
                </div>
                {% if session.user|lower == review.created_by|lower %}
                <div class="col-12 text-center">
                    <a href="{{ url_for('edit_review', review_id=review._id) }}"><i class="far fa-edit edit"></i></a>
                <a href="{{ url_for('delete_review', review_id=review._id) }}"><i class="far fa-trash-alt delete"></i></a>
                </div>
                {% endif %}
            </div>
            {% endfor %}
            {% else %}
                No reviews added yet, be the first to add one!
            {% endif %}
        </div>
    </section>
</div>

{% endblock %}