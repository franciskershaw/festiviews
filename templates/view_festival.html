{% extends "base.html" %}
{% block content %}

<section class="text-center view_festival">
    <!-- Hero image/festival name/tagline -->
    <section class="hub-hero-section" style="background-image: url('{{ festival.image_link }}');">
        {% if session.user|lower == 'administrator' %}
        <!-- Admin only edit/delete button -->
        <section class="admin-only text-end">
            <a href="{{ url_for('edit_festival', url=festival.url) }}"><i class="far fa-edit edit"></i></a>
            <a href="{{ url_for('delete_festival', url=festival.url) }}"><i class="far fa-trash-alt delete"></i></a>
            <br>
        </section>
        {% endif %}
        <div class="hub-headings-container center-content">
            <div class="hub-headings-content">
                <h1 class="hub-h1">{{ festival.name }}</h1>
                <i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i
                    class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i
                    class="fas fa-star hub-star"></i>
                <h2 class="hub-description"><em>{{ festival.description }}</em></h2>
            </div>
        </div>
    </section>
    <!-- Festival information section -->
    <section class="hub-info-container text-start container-fluid">
        <div class="container">
            <div class="row">
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Location <i class="fas fa-globe-europe"></i></h3> 
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <p class="hub-info">{{ festival.location }}</p>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Dates <i class="fas fa-calendar-day"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <p class="hub-info">{{ festival.start_date }} to {{ festival.end_date }}</p>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Website <i class="fas fa-link"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <a href="{{ festival.website }}" target="_blank" class="hub-info">Official Website <i class="fas fa-external-link-alt"></i></a>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Genre <i class="fas fa-question-circle"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <p class="hub-info">{{ festival.genre }}</p>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Notable acts <i class="fas fa-guitar"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <p class="hub-info">{{ festival.notable_act_one }}, {{ festival.notable_act_two }}, {{ festival.notable_act_three }}.</p>
                </div>
                
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Cost <i class="fas fa-money-bill"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <p class="hub-info">{{ festival.ticket_price }}</p>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Tickets <i class="fas fa-ticket-alt"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <a href="{{ festival.ticket_link }}" target="_blank" class="hub-info">Link to tickets <i class="fas fa-external-link-alt"></i></a>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Capacity <i class="fas fa-users"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <p class="hub-info"> {{ festival.capacity }}</p>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <h3 class="hub-info-heading">Covid 2021 <i class="fas fa-ban"></i></h3>
                </div>
                <div class="col-6 col-md-3 col-lg-2">
                    <p class="hub-info">{{ festival.covid_status }}</p>
                </div>
            </div>
        </div> 
    </section>
    <!-- Reviews section -->
    <section class="container-fluid reviews-section">
        <div class="container">
            <div class="row reviews-heading-container">
                <div class="col-12 text-start">
                    <h2 class="reviews-heading d-inline-block">Latest reviews</h2>
                    {% if session.user %}
                        <a class="add-review-btn" href="{{ url_for('add_review', url=festival.url) }}" role="button">Add Review <i class="fas fa-plus"></i></a>
                    {% endif %}
                </div>
            </div>
            {% if reviews_arr %}
            {% for review in reviews_arr %}
            <div class="row review-row text-start">
                <div class="col-8">
                    <h3 class="review-author">{{ review.created_by }} - <em>{{ review.year }}</em></h3>
                </div>
                <div class="col-4 text-end">
                    <h3 class="review-rating">
                        {% if review.rating == '5' %}
                        <i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i
                        class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i
                        class="fas fa-star hub-star"></i>
                        {% elif review.rating == '4' %}
                        <i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i>
                        {% elif review.rating == '3' %}
                        <i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i>
                        {% elif review.rating == '2' %}
                        <i class="fas fa-star hub-star"></i><i class="fas fa-star hub-star"></i>
                        {% elif review.rating == '1' %}
                        <i class="fas fa-star hub-star"></i>
                        {% endif %}
                    </h3>
                </div>
                <div class="col-8 review-text ellipsis">
                    <p><em>"{{ review.text }}"</em></p>
                </div>
                <div class="col-4 text-end">
                    <button class="btn read-more-less-btn">Read More</button>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-globe-europe"></i> Location: {{ review.location }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-glass-cheers"></i> Nightlife: {{ review.nightlife }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-guitar"></i> Lineup: {{ review.lineup }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-campground"></i> Campsites: {{ review.campsites }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-money-bill"></i> Value: {{ review.value }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-utensils"></i> Food: {{ review.food }}/5</h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-toilet"></i> Toilets: <em>'{{ review.toilets }}'</em></h4>
                </div>
                <div class="col-6 col-md-3">
                    <h4 class="review-category"><i class="fas fa-baby"></i> Kid friendly? <em>'{{ review.kid_friendly }}'</em></h4>
                </div>
                {% if session.user|lower == review.created_by|lower %}
                <div class="col-12 text-center edit-review-links">
                    <a href="{{ url_for('edit_review', review_id=review._id) }}"><i class="far fa-edit edit"></i></a>
                <a href="{{ url_for('delete_review', review_id=review._id) }}"><i class="far fa-trash-alt delete"></i></a>
                </div>
                {% endif %}
            </div>
            {% endfor %}
            {% else %}
            <!-- Section appears if no reviews are present -->
            <section class="no-reviews">
                <p><em>No reviews added yet, be the first to add one!</em></p>
            </section>
            {% endif %}
        </div>
    </section>
</section>

{% endblock %}